##
## Licensed to the Apache Software Foundation (ASF) under one
## or more contributor license agreements.  See the NOTICE file
## distributed with this work for additional information
## regarding copyright ownership.  The ASF licenses this file
## to you under the Apache License, Version 2.0 (the
## "License"); you may not use this file except in compliance
## with the License.  You may obtain a copy of the License at
##
##   http://www.apache.org/licenses/LICENSE-2.0
##
## Unless required by applicable law or agreed to in writing,
## software distributed under the License is distributed on an
## "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
## KIND, either express or implied.  See the License for the
## specific language governing permissions and limitations
## under the License
##

# Definitions for photoserver application
[photoserver]

# policy schema used in this conf file
schemaVersion            : 1

# a version number to resolve multiple instances of this policy
policyVersion            : 1

# Aggregate connection limits
maximumConnections        : 10
maximumConnectionsPerUser : 5
maximumConnectionsPerHost : 5

# roles is a map.
# key   = role name
# value = list of authid names assigned to the role
roles: {
  'anonymous'       : ['anonymous'],
  'users'           : ['u1', 'u2'],
  'paidsubscribers' : ['p1', 'p2'],
  'test'            : ['zeke', 'ynot'],
  'admin'           : ['alice', 'bob', 'ellen'],
  'superuser'       : ['ellen']
  }

# connectionOrigins is a map.
# key   = origin name
# value = list of host addresses or host address ranges
connectionOrigins: {
  'Ten18':      ['10.18.0.0,10.18.255.255'],
  'EllensWS':   ['72.135.2.9'],
  'TheLabs':    ['10.48.0.0,10.48.255.255','192.168.100.0,192.168.100.255'],
  'Localhost':  ['127.0.0.1','::1'],
  'TheWorld':   ['*']
  }

# connectionPolicy is a map.
# key   = role name
# value = list of connection origin names
connectionPolicy: {
  'admin'      : ['Ten18', 'TheLabs', 'Localhost'],
  'test'       : ['TheLabs'],
  'superuser'  : ['Localhost', 'EllensWS']
  }

# connectionAllowUnrestricted - If a user is not restricted by a connectionPolicy
#                               then is this user allowed to connect?
connectionAllowUnrestricted : True

# policy is a map.
# key   = role name or authid name
# value = policy containing:
#         - values passed in AMQP Open and Attach performatives
#         - allowed source and target names in AMQP Attach
#
policies: {
  'anonymous' : {
    'max_frame_size'         : 111111,
    'max_message_size'       : 111111,
    'max_session_window'     : 111111,
    'max_sessions'           : 1,
    'max_senders'            : 11,
    'max_receivers'          : 11,
    'allow_dynamic_src'      : False,
    'allow_anonymous_sender' : False,
    'sources'                : ['public'],
    'targets'                : []
    },
  'users' : {
    'max_frame_size'         : 222222,
    'max_message_size'       : 222222,
    'max_session_window'     : 222222,
    'max_sessions'           : 2,
    'max_senders'            : 22,
    'max_receivers'          : 22,
    'allow_dynamic_src'      : False,
    'allow_anonymous_sender' : False,
    'sources'                : ['public', 'private'],
    'targets'                : ['public']
    },
  'paidsubscribers' : {
    'max_frame_size'         : 333333,
    'max_message_size'       : 333333,
    'max_session_window'     : 333333,
    'max_sessions'           : 3,
    'max_senders'            : 33,
    'max_receivers'          : 33,
    'allow_dynamic_src'      : True,
    'allow_anonymous_sender' : False,
    'sources'                : ['public', 'private'],
    'targets'                : ['public', 'private']
    },
  'test' : {
    'max_frame_size'         : 444444,
    'max_message_size'       : 444444,
    'max_session_window'     : 444444,
    'max_sessions'           : 4,
    'max_senders'            : 44,
    'max_receivers'          : 44,
    'allow_dynamic_src'      : True,
    'allow_anonymous_sender' : True,
    'sources'                : ['private'],
    'targets'                : ['private']
    },
  'admin' : {
    'max_frame_size'         : 555555,
    'max_message_size'       : 555555,
    'max_session_window'     : 555555,
    'max_sessions'           : 5,
    'max_senders'            : 55,
    'max_receivers'          : 55,
    'allow_dynamic_src'      : True,
    'allow_anonymous_sender' : True,
    'sources'                : ['public', 'private', 'management'],
    'targets'                : ['public', 'private', 'management']
    },
  'superuser' : {
    'max_frame_size'         : 666666,
    'max_message_size'       : 666666,
    'max_session_window'     : 666666,
    'max_sessions'           : 6,
    'max_senders'            : 66,
    'max_receivers'          : 66,
    'allow_dynamic_src'      : False,
    'allow_anonymous_sender' : False,
    'sources'                : ['public', 'private', 'management', 'root'],
    'targets'                : ['public', 'private', 'management', 'root']
    }
  }
