.\" -*- nroff -*-
.\"
.\" Licensed to the Apache Software Foundation (ASF) under one
.\" or more contributor license agreements.  See the NOTICE file
.\" distributed with this work for additional information
.\" regarding copyright ownership.  The ASF licenses this file
.\" to you under the Apache License, Version 2.0 (the
.\" "License"); you may not use this file except in compliance
.\" with the License.  You may obtain a copy of the License at
.\"
.\"   http://www.apache.org/licenses/LICENSE-2.0
.\"
.\" Unless required by applicable law or agreed to in writing,
.\" software distributed under the License is distributed on an
.\" "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
.\" KIND, either express or implied.  See the License for the
.\" specific language governing permissions and limitations
.\" under the License
.\"
.TH QDROUTERD.CONF 5
.SH NAME
qdrouterd.conf \- Configuration file for the Qpid Dispatch router
.\" XXX .SH DESCRIPTION
.\" when loaded, reloaded (sighup?)
.\" XXX .SH SYNTAX
.SH OPTIONS
.SS "'container' section"
.IP container-name
The name of the AMQP container.  If not specified, the container name
will be set to a value of the container's choosing.  The automatically
assigned container name is not guaranteed to be persistent across
restarts of the container.
.IP worker-threads
The number of threads that will be created to process message traffic
and other application work (timers, non-amqp file descriptors, etc.)
.SS "'ssl-profile' section"
.IP
Zero or more SSL profiles may be defined and then referenced later in
listeners (for incoming connections) or connectors (for outgoing
connectors).
.IP name
The name of the profile to be referenced later.
.IP cert-db
The path to the database that contains the public certificates of
trusted certificate authorities (CAs).
.IP cert-file
The path to the file containing the PEM-formatted public certificate
to be used on the local end of any connections using this profile.
.IP key-file
The path to the file containing the PEM-formatted private key for the
above certificate.
.IP password-file
If the above private key is password protected, this is the path to a
file containing the password that unlocks the certificate key.
.IP password
An alternative to storing the password in a file referenced by
password-file is to supply the password right here in the
configuration file.  This option can be used by supplying the password
in the 'password' option.  Don't use both password and password-file
in the same profile.
.SS "'listener' and 'connector' sections"
.IP addr
The listener or connector address.  This can be an IP address or a host name.
.IP port
The listener or connector port.  This can be a numeric port or a symbolic value like "amqp".
.IP role
The role of the established connection.  This is one of "normal" or "inter-router".  If
this item is not provided, it defaults to "normal".  In the normal role, the
connection is assumed to be used for AMQP clients that are doing normal message
delivery over the connection.  In the inter-router role, the connection is assumed to
be to another router in the network.  Inter-router discovery and routing protocols
can only be used over inter-router connections.
.IP sasl-mechanisms
A list of accepted SASL mechanisms
.IP ssl-profile
If SSL is to be used for this connector or listener, a profile is selected
by name using this configuration setting.
.IP require-peer-auth
Only for listeners using SSL.  If set to "yes", attached clients will be required to
supply a certificate.  If the certificate is not traceable to a CA in the ssl profile's
cert-db, authentication fails for the connection.
.IP trusted-certs
This optional setting can be used to reduce the set of available CAs for client
authentication.  If used, this setting must provide a path to a PEM file that
contains the trusted certificates.
.IP allow-unsecured
For listeners using SSL only.  If set to "yes", this option causes the listener to
watch the initial network traffic to determine if the client is using SSL or is
running in-the-clear.  The listener will enable SSL only if the client uis using SSL.
.IP max-frame-size
Defaults to 65536.  If specified, it is the maximum-frame-size in octets that will be used in
the connection-open negotiation with a connected peer.  The frame size is the largest contiguous
set of uniterruptible data that can be sent for a message delivery over the connection.
Interleaving of messages on different links is done at frame granularity.
.SS "'router' section"
.IP mode
One of "standalone", "interior", or "edge".  In standalone mode, the
router operates as a single component.  It does not participate in the
routing protocol and therefore will not coorperate with other routers.
In interior mode, the router operates in cooreration with other
interior routers in an interconnected network.  In edge mode, the
router operates with an uplink into an interior router network. Edge
routers are typically used as connection concentrators or as security
firewalls for access into the interior network.
.IP router-id
Each router is assigned a router-id that is unique.  For interior
router mode only.
.SS "'fixed-address' section"
Fixed-address sections are used to specify the router's behavior for sets
of addresses defined by prefix.  If there are multiple fix-address sections
in the configuration, they are considered in the order in which they appear.
When an address matches a fixed-address prefix, the matching configuration is
used and no other configurations are considered.
If there is a catch-all prefix ("/"), it must be the last one specified.
.IP prefix
The address prefix (always starting with "/").
.IP fanout
One of "multiple" or "single".  Multiple fanout is a non-competing pattern.  If there
are multiple consumers using the same address, each consumer will receive its own copy
of every message sent to the address.  Single fanout is a competing pattern where each
message is sent to only one consumer.
.IP bias
Only if fanout is single.  One of "closest" or "spread".  Closest bias means that messages
to an address will always be delivered to the closest (lowest cost) subscribed consumer.
Spread bias will distribute the messages across subscribers in an approximately even
manner.
.SS "'log' section"
Specifies logging for a router module. 
.IP module
The module name, e.g. ROUTER, MESSAGE, SERVER, AGENT, CONTAINER, CONFIG. The special module name DEFAULT specifies logging for any modules that don't have explicit log sections.
.IP level
One of NONE, TRACE, DEBUG, INFO, NOTICE, WARNING, ERROR, CRITICAL. Indicates the minimum
logging level for the module. E.g. WARNING means log WARNING, ERROR and CRITICAL messages.
TRACE logs all messages. NONE disables logging for the module.
.IP output
Where to send log messages. Can be 'stderr', 'syslog' or a file name.
.\" XXX .SH EXAMPLES
.SH FILES
.I /etc/qpid-dispatch/qdrouterd.conf
.SH SEE ALSO
.BR qdrouterd (8),
.BR qdstat (8),
.BR qdstat.conf (5)
.SH AUTHOR
Apache Qpid <http://qpid.apache.org/>
.SH COPYRIGHT
Copyright 2014 The Apache Software Foundation
